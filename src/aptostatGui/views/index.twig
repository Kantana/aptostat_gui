{% extends 'layout.twig' %}
{% block title %}Customer front{% endblock %}

{% block content %}
    <!--HEADER-->

    <header id="header">
        <div id="header-content">
            <a href="http://apto.vlab.iu.hio.no/customer_front.php"><img id="logo" src="/img/logo.png" /></a>
        </div>
    </header>
    <div id="content_wrapper">
        <div class="container">
            <div class="row">
                <div class="span5 suffix1">
                    <div class="front_messagebox">
                        <ol class="tree">
                            {% for serviceGroupName, serviceGroup in realTime %}
                                <li>
                                    {% if (serviceGroup['groupState'] == 'up') %}
                                        <label for='{{ serviceGroupName }}'>
                                            <strong>{{ serviceGroupName }}</strong>
                                            <img src='../img/check.png' /> <strong>OK</strong>
                                        </label>
                                        <input type='checkbox' id='{{ serviceGroupName }}' />
                                    {% elseif (serviceGroup['groupState']) == 'warning' %}
                                        <label for='{{ serviceGroupName }}'>
                                            <strong>{{ serviceGroupName }}</strong>
                                            <img src='../img/warning.png' /> <strong>Problem</strong>
                                        </label>
                                        <input type='checkbox' checked id='{{ serviceGroupName }}' />
                                    {% else %}
                                        <label for='{{ serviceGroupName }}'>
                                            <strong>{{ serviceGroupName }}</strong>
                                            <img src='../img/cross.png' /> <strong>Down</strong>
                                        </label>
                                        <input type='checkbox' checked id='{{ serviceGroupName }}' />
                                    {% endif %}

                                    <ol>
                                        {% for service, state in serviceGroup if service != 'groupState' %}
                                            <li class="file">
                                                {{ service }}
                                                {% if state == 'up' %}
                                                    <img src='../img/check.png' /> OK
                                                {% elseif state == 'warning' %}
                                                    <img src='../img/warning.png' /> Problem
                                                {% else %}
                                                    <img src='../img/cross.png' /> Down
                                                {% endif %}
                                            </li>
                                        {% endfor %}
                                    </ol>
                                </li>
                            {% endfor %}
                        </ol>
                    </div>
                </div>

                <div class="span5 offset2">

                    <?php include "inc/ongoing_issues.php"; ?>

                </div>
            </div>

            <hr />

            <div>

                <div class="row">
                    <div class="span12">

                        <?php include "inc/uptime_table.php"; ?>

                    </div>
                </div>

                <div class="row">
                    <div class="span12">

                        <?php include "inc/message_history.php"; ?>

                    </div>

                </div>
            </div>
        </div>
    </div>

    <?php include 'inc/cust_footer.php'; ?>
{% endblock %}
